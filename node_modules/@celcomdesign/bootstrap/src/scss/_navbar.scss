// Custom Navbar
.navbar {
  padding: 0;

  // Fixed-top
  &.fixed-top {
    // Navbar tab
    .navbar-tab {
      li:only-child {
        margin-bottom: calc(100vh - 184px);
      }

      li:first-child:nth-last-child(2) ~ li:last-child {
        margin-bottom: calc(100vh - 226px);
      }

      li:first-child:nth-last-child(3) ~ li:last-child {
        margin-bottom: calc(100vh - 268px);
      }

      li:first-child:nth-last-child(4) ~ li:last-child {
        margin-bottom: calc(100vh - 310px);
      }

      li:first-child:nth-last-child(5) ~ li:last-child {
        margin-bottom: calc(100vh - 352px);
      }

      li:first-child:nth-last-child(6) ~ li:last-child {
        margin-bottom: calc(100vh - 394px);
      }
    }

    // Navbar mega
    .navbar-mega {
      .tab-pane {
        height: calc(100vh - 150px);
      }
    }
  }
}

// Navbar brand
.navbar-brand {
  margin-left: .5rem;
}

// Navbar tab
.navbar-tab {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  padding: 0;
  margin-top: 1rem;
  margin-right: .5rem;
  margin-bottom: 2.875rem;
  margin-left: .5rem;
  overflow: scroll;
  list-style: none;

  .nav-item {
    width: 100%;
    margin-bottom: .5rem;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .nav-link {
    display: flex;
    align-items: center;
    padding: .5rem;
    line-height: 1;
    border: 1px solid transparent;
    border-radius: .5rem;
    transition: $transition-fade;
  }

  .dropdown {
    position: unset;
  }

  .dropdown-toggle::after {
    float: right;
    width: 1rem;
    height: 1rem;
    margin-left: auto;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem;
    border: 0;
    transition: transform .2s ease-in-out;
  }

  .dropdown-menu {
    top: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    background-color: transparent;
    border: 0;

    .dropdown-item {
      margin-bottom: .5rem;
      line-height: 1;
      white-space: normal;
      border: 1px solid transparent;
      transition: $transition-fade;

      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}

// Navbar mega
.navbar-mega {
  .dropdown-menu {
    .dropdown-item::after {
      float: right;
      width: 1rem;
      height: 1rem;
      margin-left: auto;
      content: "";
      background-repeat: no-repeat;
      background-size: 1rem;
      border: 0;
      transition: transform .2s ease-in-out;
    }
  }

  .tab-content {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    height: auto;
    padding-right: 0;
    padding-left: 0;

    .tab-pane {
      height: auto;
      min-height: 18rem; // Hacky height
      background-color: $white;
    }
  }

  .tab-pane {
    ul {
      display: flex;
      flex-direction: column;
      width: 100%;
      padding-left: 0;
      list-style: none;
    }
  }
}

// Navbar global & icon
.navbar-global,
.navbar-icon {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  padding-left: 0;
  list-style: none;
}

.navbar-global {
  margin-bottom: auto;

  &.collapse,
  &.collapsing {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    margin-bottom: 0;
  }

  &.collapsing {
    transition: height 0s linear .1s;
  }

  .nav-link {
    padding: .5rem .75rem;
    font-size: .75rem;
    text-align: center;
  }
}

.navbar-icon {
  margin-top: 0;
  margin-bottom: 0;

  .nav-link {
    padding: $navbar-toggler-padding-y $navbar-toggler-padding-x;
  }

  .dropdown {
    position: inherit;
  }

  .dropdown-toggle::after {
    display: block;
    margin-left: 0;
    border: 0;
  }

  .dropdown-menu {
    top: 88px;
    right: 0;
    left: 0;
    flex-direction: column;
    width: 100%;
    max-width: 576px;
    padding: .5rem;
    margin-right: auto;
    margin-left: auto;
    border: 0;
    border-radius: 0;
  }

  .dropdown-menu.show {
    display: flex;
  }

  .dropdown-item {
    display: flex;
    align-items: center;
    padding: .5rem;
    line-height: 1;
    border: 1px solid transparent;
    border-radius: .5rem;
    transition: opacity .15s linear;
  }
}

// Navbar toggler
.navbar-toggler {
  border: none; // remove default
}

// Themes

// Light
.navbar-light {
  .navbar-toggler {
    .navbar-toggler-icon {
      background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-light-color}' d='M25.414 24L40.707 8.707a1 1 0 00-1.414-1.414L24 22.586 8.707 7.293a1 1 0 00-1.414 1.414L22.586 24 7.293 39.293a1 1 0 101.414 1.414L24 25.414l15.293 15.293a1 1 0 001.414-1.414z'/></svg>"));
    }

    &.collapsed {
      .navbar-toggler-icon {
        background-image: escape-svg($navbar-light-toggler-icon-bg);
      }
    }
  }

  .navbar-tab {
    .nav-link {
      color: $navbar-light-color;

      &:hover {
        color: $celcom-blue;
        text-shadow: 0 0 .5px $celcom-blue;
        background: rgba($black, .1);
      }

      &.disabled {
        color: $navbar-light-disabled-color;
      }
    }

    .show > .nav-link,
    .active > .nav-link,
    .nav-link.show,
    .nav-link.active {
      color: $celcom-blue;
      text-shadow: 0 0 .5px $celcom-blue;
      background: $gray-100;
    }

    .dropdown-toggle::after {
      background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-light-color}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
    }

    .dropdown-toggle:hover::after {
      background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$celcom-blue}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
    }

    .dropdown-menu {
      background-color: $white;

      .dropdown-item {
        &:hover {
          color: $primary;
          text-shadow: 0 0 .5px $primary;
          background-color: $gray-50;
        }
      }
    }
  }

  .navbar-mega {
    .dropdown-menu {
      .dropdown-item::after {
        background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-light-color}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
      }

      .dropdown-item:hover::after {
        background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$celcom-blue}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
      }
    }
  }

  .navbar-global {
    background-color: $gray-100;

    .nav-link {
      color: $gray-400;

      &:hover,
      &:focus {
        color: $gray-800;
      }

      &.disabled {
        color: $navbar-light-disabled-color;
      }
    }

    .active > .nav-link,
    .nav-link.active {
      color: $gray-800;
      text-shadow: 0 0 .5px $gray-800;
    }
  }

  .navbar-icon {
    .btn-outline-secondary:hover {
      background-color: $gray-100;
      border-color: $gray-200;
    }

    .dropdown-item.active,
    .dropdown-item:hover {
      color: #009bdf;
      text-shadow: 0 0 .5px #009bdf;
      background: #e6e6e6;
    }

    .dropdown-item:hover {
      cursor: pointer;

      > img {
        filter: invert(44%) sepia(33%) saturate(4974%) hue-rotate(171deg) brightness(98%) contrast(101%);
      }
    }
  }
}

// Dark
.navbar-dark {
  .navbar-toggler {
    .navbar-toggler-icon {
      background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-dark-color}' d='M25.414 24L40.707 8.707a1 1 0 00-1.414-1.414L24 22.586 8.707 7.293a1 1 0 00-1.414 1.414L22.586 24 7.293 39.293a1 1 0 101.414 1.414L24 25.414l15.293 15.293a1 1 0 001.414-1.414z'/></svg>"));
    }

    &.collapsed {
      .navbar-toggler-icon {
        background-image: escape-svg($navbar-dark-toggler-icon-bg);
      }
    }
  }

  .navbar-tab {
    .nav-link {
      color: $navbar-dark-color;

      &:hover {
        color: $navbar-dark-hover-color;
        text-shadow: 0 0 .5px $navbar-dark-hover-color;
        background: rgba($black, .2);
      }

      &.disabled {
        color: $navbar-dark-disabled-color;
      }
    }

    .show > .nav-link,
    .active > .nav-link,
    .nav-link.show,
    .nav-link.active {
      color: $navbar-dark-active-color;
      text-shadow: 0 0 .5px $navbar-dark-active-color;
      background: rgba($black, .2);
    }

    .dropdown-toggle::after {
      background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-dark-color}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
    }

    .dropdown-menu {
      color: $white;
      background-color: $gray-800;

      .dropdown-item {
        color: $white;

        &:hover {
          color: $navbar-dark-active-color;
          text-shadow: 0 0 .5px $navbar-dark-active-color;
          background-color: rgba($black, .2);
        }
      }
    }
  }

  .navbar-mega {
    .dropdown-menu {
      .dropdown-item::after {
        background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-dark-color}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
      }
    }

    .tab-content {
      .tab-pane {
        background-color: $gray-800;
      }
    }

    .nav-link > img,
    .dropdown-item > img {
      filter: invert(100%);
    }
  }

  .navbar-global {
    background-color: #292929;

    .nav-link {
      color: $gray-400;

      &:hover,
      &:focus {
        color: $gray-200;
      }

      &.disabled {
        color: $navbar-dark-disabled-color;
      }
    }

    .active > .nav-link,
    .nav-link.active {
      color: $gray-200;
      text-shadow: 0 0 .5px $gray-200;
    }
  }
}

// Generate series of `.navbar-expand-*` responsive classes for configuring where your navbar collapses.
.navbar-expand {
  @each $breakpoint in map-keys($grid-breakpoints) {
    $next: breakpoint-next($breakpoint, $grid-breakpoints);
    $infix: breakpoint-infix($next, $grid-breakpoints);

    &#{$infix} {
      @include media-breakpoint-up($next) {
        // Navbar fixed
        &.fixed-top {
          .navbar-tab {
            li:only-child,
            li:first-child:nth-last-child(2) ~ li:last-child,
            li:first-child:nth-last-child(3) ~ li:last-child,
            li:first-child:nth-last-child(4) ~ li:last-child,
            li:first-child:nth-last-child(5) ~ li:last-child,
            li:first-child:nth-last-child(6) ~ li:last-child {
              margin-bottom: 0;
            }
          }
        }

        // Navbar brand
        .navbar-brand {
          margin-left: 0;
        }

        // Navbar tab
        .navbar-tab {
          flex-direction: row;
          margin-top: 2.375rem;
          margin-right: 0;
          margin-bottom: 0;
          margin-left: 0;
          overflow: inherit;

          .nav-item {
            width: auto;
            margin-bottom: 0;
          }

          .nav-link {
            position: relative;
            padding: 1rem;
            border-radius: .5rem .5rem 0 0;
          }

          .dropdown-item.show,
          .dropdown-item.active {
            color: $dropdown-link-color;
            text-shadow: 0 0 .5px $white;
            background: rgba($black, .2);
          }

          .dropdown {
            position: relative;
          }

          .dropdown-toggle::after {
            position: absolute;
            bottom: .5rem;
            left: calc(50% - .25rem);
            display: block;
            width: auto;
            height: auto;
            margin-left: 0;
            border-top: $caret-width solid;
            border-right: $caret-width solid transparent;
            border-bottom: 0;
            border-left: $caret-width solid transparent;
          }

          .show > .dropdown-toggle,
          .active > .dropdown-toggle,
          .dropdown-toggle.show,
          .dropdown-toggle.active {
            color: $gray-800;
            text-shadow: 0 0 .5px $gray-800;
            background: $white;
            border: 1px solid $gray-50;
            box-shadow: $box-shadow-sm;

            &::after {
              position: absolute;
              bottom: -2px;
              left: 0;
              z-index: $zindex-sticky;
              width: 100%;
              height: .25rem;
              background: $white;
              border-top: $caret-width solid $white;
            }
          }

          .dropdown-menu {
            top: 100%;
            height: auto;
            padding: .5rem;
            margin-top: 0;
            color: inherit;
            background-color: $white;
            border: 1px solid $gray-50;
            border-radius: 0 0 .5rem .5rem;
            box-shadow: $box-shadow-sm;

            .dropdown-item {
              padding: .5rem;
              margin-bottom: 0;
              color: $dropdown-link-color;
              border-radius: .5rem;

              &:hover {
                color: $primary;
                text-shadow: 0 0 .5px $primary;
                background-color: $gray-50;
              }
            }
          }
        }

        // Navbar mega
        .navbar-mega {
          position: static;

          .dropdown {
            position: static;
          }

          .dropdown-menu {
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
            border-radius: 0;

            .dropdown-item {
              &::after {
                background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$navbar-light-color}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
              }

              &:hover::after {
                background-image: escape-svg(url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='#{$celcom-blue}' d='M13 43a1 1 0 01-.774-.367 1 1 0 01.141-1.407L33.421 24 12.367 6.774a1 1 0 01-.141-1.407 1 1 0 011.407-.141l22 18A1 1 0 0136 24a1 1 0 01-.367.774l-22 18A1 1 0 0113 43z'/></svg>"));
              }
            }
          }

          .tab-content {
            position: relative;

            .tab-pane {
              height: auto;
              min-height: auto;
              background-color: #fff;
            }
          }

          .tab-pane {
            ul {
              flex-direction: row;
              flex-wrap: wrap;
            }
          }

          .nav-link > img,
          .dropdown-item > img {
            filter: none;
          }

          .nav-link:hover > img,
          .dropdown-item:hover > img {
            filter: invert(44%) sepia(33%) saturate(4974%) hue-rotate(171deg) brightness(98%) contrast(101%);
          }
        }

        // Navbar global
        .navbar-global {
          position: relative;
          top: 0;
          bottom: auto;
          left: auto;
          display: flex;
          width: auto;
          padding: 0 .75rem;
          white-space: nowrap;
          border-radius: 0 0 .5rem .5rem;
        }

        // Navbar icon
        .navbar-icon {
          .nav-item {
            margin-top: .8125rem;
            margin-bottom: .8125rem;
          }

          .nav-link {
            display: flex;
            align-items: center;

            &.btn {
              transition: none;
            }

            &:not(.btn) {
              border-right: $btn-border-width solid transparent;
              border-left: $btn-border-width solid transparent;
            }

            &:not(.dropdown-item) {
              margin-left: .5rem;
            }
          }

          .nav-item:last-child > .nav-link {
            margin-right: .5rem;
            margin-left: .5rem;
          }

          .dropdown {
            position: relative;

            &.show {
              margin-top: 0;
              margin-bottom: 0;
            }
          }

          .show > .dropdown-toggle,
          .active > .dropdown-toggle,
          .dropdown-toggle.show,
          .dropdown-toggle.active {
            padding-top: 1rem;
            padding-bottom: 1rem;
            color: $gray-800;
            text-shadow: 0 0 .5px $gray-800;
            background: $white;
            border: 1px solid $gray-50;
            border-radius: .5rem .5rem 0 0;
            box-shadow: $box-shadow-sm;

            &::after {
              position: absolute;
              bottom: -2px;
              left: calc(.5rem + 1px);
              z-index: $zindex-sticky;
              width: calc(100% - 10px);
              height: .25rem;
              background: $white;
              border-top: $caret-width solid $white;
            }
          }

          .dropdown-menu {
            top: 100%;
            right: 0;
            left: auto;
            min-width: 20rem;
            height: auto;
            padding: .5rem;
            margin-top: 0;
            color: inherit;
            background-color: $white;
            border: 1px solid $gray-50;
            border-radius: 0 0 .5rem .5rem;
            box-shadow: $box-shadow-sm;
          }

          .dropdown-item {
            display: flex;
            align-items: center;
            padding: .5rem;
            margin-bottom: 0;
            color: $dropdown-link-color;
            white-space: normal;
            border-radius: .5rem;

            &:hover {
              color: $primary;
              text-shadow: 0 0 .5px $primary;
              cursor: pointer;
              background-color: $gray-50;

              > img {
                filter: invert(44%) sepia(33%) saturate(4974%) hue-rotate(171deg) brightness(98%) contrast(101%);
              }
            }
          }
        }
      }
    }
  }
}
